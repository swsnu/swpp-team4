# CI environment
#os: linux
#dist: bionic

matrix:
  include:
    - language: node_js
      node_js: "12"
      addon:
        sonarcloud:
          organization: "swsnu"
          token:
            secure: "J2FxGfat/KP8QN7lYp+7ViPSXI/g1N/432yCqYDLYpY4cRAmwlUJShmqPX4NF72EngS5iLB6lhxzI2hqyklYLKTqRZQxZMrvR2kaNzM4z5AZrrJI0DKXR21mycynSqgpGchRKRPUYzFR6MKZpKpW+yaVFsb/DAOOt/qrZtDq3MH3nerOsfn7cV+OLhMip3HWJnSoMX7ljuyS4Ry/EfoAZhbH/zsZCYZDoQHFDr9fHOSL3ExL6EmsQ4SkiHOTJKlE6WEYlL6KWOFDXTxOEeNGC0DpIC1A4YF9K+mWRrYsK7Ba9b0eZfMuNSAAy8E9PRXab1nzrpHgV/xY5VSC0oZ+WPeg/jkl/MDz691L9gSvjhVTFFESqLBHluMWCtbPqSX1IVyULolVhyhfkYjK4jPHGTYiW+8wMJhpfuEeqb4YLIiI9XMpOgxbneG2MSfYrG3iYXR3LODtj5xmwfh3WReOiO4US3obyjIXBB06Aj3uLryhWSbvK8Sd4Vr9cGHo+V1VtzfzFhPaYmAZ3dGC9Lp8iBlSwZqaYOEBIrxoPfDlzBtlDLpYXCk9e5aX1k+aJkIvoGCk3oV/pPt9KIbujEMD7ySOL09rERDiQjLm9gjp435VIBFBp5K/YSWeQvBuysWc97dgdJwR428H3TpXR/irypqJDuHmxqCVswB+aLpWBeU="
      cache:
        - yarn: true
      before_install:
        - cd front
      install:
        - yarn install
      script:
        - ./node_modules/.bin/eslint src/
        - yarn test --coverage --watchAll=false
        - cd .. && sonar-scanner

    - language: python
      python: "3.7"
      addon:
        sonarcloud:
          organization: "swsnu"
          token:
            secure: "J2FxGfat/KP8QN7lYp+7ViPSXI/g1N/432yCqYDLYpY4cRAmwlUJShmqPX4NF72EngS5iLB6lhxzI2hqyklYLKTqRZQxZMrvR2kaNzM4z5AZrrJI0DKXR21mycynSqgpGchRKRPUYzFR6MKZpKpW+yaVFsb/DAOOt/qrZtDq3MH3nerOsfn7cV+OLhMip3HWJnSoMX7ljuyS4Ry/EfoAZhbH/zsZCYZDoQHFDr9fHOSL3ExL6EmsQ4SkiHOTJKlE6WEYlL6KWOFDXTxOEeNGC0DpIC1A4YF9K+mWRrYsK7Ba9b0eZfMuNSAAy8E9PRXab1nzrpHgV/xY5VSC0oZ+WPeg/jkl/MDz691L9gSvjhVTFFESqLBHluMWCtbPqSX1IVyULolVhyhfkYjK4jPHGTYiW+8wMJhpfuEeqb4YLIiI9XMpOgxbneG2MSfYrG3iYXR3LODtj5xmwfh3WReOiO4US3obyjIXBB06Aj3uLryhWSbvK8Sd4Vr9cGHo+V1VtzfzFhPaYmAZ3dGC9Lp8iBlSwZqaYOEBIrxoPfDlzBtlDLpYXCk9e5aX1k+aJkIvoGCk3oV/pPt9KIbujEMD7ySOL09rERDiQjLm9gjp435VIBFBp5K/YSWeQvBuysWc97dgdJwR428H3TpXR/irypqJDuHmxqCVswB+aLpWBeU="
      cache:
        - pip: true
      before_install:
        - cd back
      install:
        - pip install -r requirements.txt
      script:
        - pylint **/*.py --load-plugins pylint_django
        - coverage run --source='.' manage.py test
        - coverage xml
        - cd .. && sonar-scanner
